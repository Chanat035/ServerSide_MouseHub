<style>
  /* ---------- Body ---------- */
  body {
    font-family: "Prompt", sans-serif;
    background-color: #0d0d0d;
    color: #fff;
    margin: 0;
  }

  /* ---------- Navbar ---------- */
  .navbar-custom {
    background-color: #1a1a1a;
    padding: 0.8rem 2rem;
    box-shadow: 0 2px 10px rgba(255, 191, 0, 0.15);
  }

  .navbar-brand {
    font-weight: 700;
    font-size: 1.4rem;
    color: #ffb500 !important;
    letter-spacing: 1px;
    transition: color 0.3s;
  }

  .navbar-brand:hover {
    color: #ffd658 !important;
  }

  /* ---------- Main menu ---------- */
  .navbar-custom .nav-link {
    color: #f0f0f0;
    font-weight: 500;
    padding: 0.4rem 0.8rem;
    position: relative;
    transition: color 0.3s;
  }

  /* Underline minimal effect */
  .navbar-custom .nav-link::after {
    content: "";
    display: block;
    width: 0;
    height: 2px;
    background: #ffb500;
    transition: width 0.3s;
    margin-top: 3px;
  }

  .navbar-custom .nav-link:hover::after,
  .navbar-custom .nav-link.active::after {
    width: 100%;
  }

  .navbar-custom .nav-link:hover {
    color: #ffb500;
  }

  /* ---------- Dropdown ---------- */
  .nav-item.dropdown .dropdown-menu {
    background-color: #1a1a1a;
    border: 1px solid #333;
    border-radius: 6px;
    min-width: 180px;
    padding: 0.3rem 0;
  }

  .dropdown-item {
    color: #f0f0f0;
    padding: 0.5rem 1rem;
    transition: all 0.2s;
  }

  .dropdown-item:hover {
    background-color: #ffb500;
    color: #000;
  }

  /* ---------- Icons ---------- */
  .nav-icon {
    font-size: 1.3rem;
    color: #f0f0f0;
    transition: color 0.3s;
  }

  .nav-icon:hover {
    color: #ffb500;
  }

  /* ---------- User Dropdown ---------- */
  .nav-item.dropdown .nav-link.dropdown-toggle {
    color: #ffd658 !important;
    font-weight: 600;
  }

  .nav-item.dropdown .dropdown-menu form .btn {
    width: 100%;
    text-align: left;
    padding: 0.4rem 1rem;
    border: none;
    background: transparent;
    color: #f0f0f0;
  }

  .nav-item.dropdown .dropdown-menu form .btn:hover {
    background-color: #ffb500;
    color: #000;
  }

  /* ---------- Navbar spacing ---------- */
  .navbar-nav.mx-auto {
    gap: 1.2rem;
  }

  .d-flex.ms-auto {
    gap: 1rem;
  }
</style>

<nav class="navbar navbar-expand-lg navbar-custom">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">üê≠ MouseHub</a>
    <button
      class="navbar-toggler text-light"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
    >
      <i class="bi bi-list fs-2"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å -->
      <div class="mx-auto d-flex align-items-center gap-3">
        <a class="nav-link" href="/">HOME</a>
        <div class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown"
            >PRODUCTS</a
          >
          <ul class="dropdown-menu">
            <li>
              <a
                class="dropdown-item"
                href="/products?category="
                data-category=""
                >All</a
              >
            </li>
            <li>
              <a
                class="dropdown-item"
                href="/products?category=Mouse"
                data-category="Mouse"
                >Mouse</a
              >
            </li>
            <li>
              <a
                class="dropdown-item"
                href="/products?category=Mousepad"
                data-category="Mousepad"
                >MousePad</a
              >
            </li>
            <li>
              <a
                class="dropdown-item"
                href="/products?category=Mousefeet"
                data-category="Mousefeet"
                >MouseFeet</a
              >
            </li>
          </ul>
        </div>
        <a class="nav-link" href="/about">ABOUT</a>
      </div>
      <!-- ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞ user -->
      <div class="d-flex align-items-center gap-2 ms-auto">
        <% if (user) { %>
        <div class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle text-warning fw-semibold"
            href="#"
            id="userDropdown"
            role="button"
            data-bs-toggle="dropdown"
          >
            üëã ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, <%= user.username %>
          </a>
          <ul
            class="dropdown-menu dropdown-menu-end"
            aria-labelledby="userDropdown"
          >
            <li>
              <span class="dropdown-item-text text-warning fw-semibold">
                ‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ : <%= user.balance %> ‡∏ø
              </span>
            </li>
            <li><a class="dropdown-item" href="/order">Orders</a></li>
            <li><a class="dropdown-item" href="/settings">Setting</a></li>
            <li>
              <form action="/api/logout" method="POST">
                <button type="submit" class="dropdown-item">Logout</button>
              </form>
            </li>
          </ul>
        </div>
        <!-- Cart Modal -->
        <div
          class="modal fade"
          id="cartModal"
          tabindex="-1"
          aria-labelledby="cartModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content bg-dark text-light">
              <div class="modal-header border-0">
                <h5 class="modal-title" id="cartModalLabel">
                  üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
                </h5>
                <button
                  type="button"
                  class="btn-close btn-close-white"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">
                <div id="cartItemsContainer" class="list-group"></div>
              </div>
              <div class="modal-footer border-0">
                <div id="cartTotal" class="fw-bold text-warning">
                  ‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: 0‡∏ø
                </div>
                <button id="checkoutButton" class="btn btn-warning fw-semibold">
                  ‡πÑ‡∏õ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
                </button>
              </div>
            </div>
          </div>
        </div>

        <div
          class="modal fade"
          id="confirmCheckoutModal"
          tabindex="-1"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-light">
              <div class="modal-header border-0">
                <h5 class="modal-title">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h5>
                <button
                  type="button"
                  class="btn-close btn-close-white"
                  data-bs-dismiss="modal"
                ></button>
              </div>
              <div class="modal-body text-center">
                ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
              </div>
              <div class="modal-footer border-0">
                <button class="btn btn-secondary" data-bs-dismiss="modal">
                  ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                </button>
                <button id="confirmCheckoutBtn" class="btn btn-warning">
                  ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                </button>
              </div>
            </div>
          </div>
        </div>

        <script src="/user-cart.js"></script>
        <% if (user) { %>
        <script>
          window.USER_ID = "<%= user.userId %>";
          window.USER_ADDRESS = "<%= user.address || '' %>";
        </script>
        <% } %>
        <script src="/user-checkout.js"></script>
        <% } else { %>
        <a
          class="nav-link"
          href="#"
          data-bs-toggle="modal"
          data-bs-target="#loginModal"
        >
          <i class="bi bi-person nav-icon"></i>
        </a>
        <% } %>
        <a
          class="nav-link"
          href="#"
          id="cartButton"
          data-bs-toggle="modal"
          data-bs-target="#cartModal"
        >
          <i class="bi bi-cart nav-icon"></i>
        </a>
      </div>
    </div>
  </div>
</nav>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const path = window.location.pathname;

    // ‡∏•‡πâ‡∏≤‡∏á active ‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡πà‡∏≠‡∏ô
    document.querySelectorAll(".navbar-custom .nav-link").forEach(link => {
      link.classList.remove("active");
    });

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
    if (path === "/" || path.startsWith("/home")) {
      document.querySelector('.nav-link[href="/"]')?.classList.add("active");
    } else if (path.startsWith("/products")) {
      document.querySelector('.nav-link.dropdown-toggle')?.classList.add("active");
    } else if (path.startsWith("/about")) {
      document.querySelector('.nav-link[href="/about"]')?.classList.add("active");
    } else if (path.startsWith("/order")) {
    }
  });
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
